{
  "className": "CharacterAction",
  "listed": 1,
  "info": {
    "types": {
      "1": "TYPE_COMMON",
      "2": "TYPE_FACTION",
      "3": "TYPE_CHARACTER",
      "4": "TYPE_ARMY"
    },
    "phases": {
      "1": "PHASE_COMMON",
      "2": "PHASE_SPENDING",
      "3": "PHASE_MANEUVRES",
      "4": "PHASE_AFTER_MANEUVRES"
    }
  },
  "elements": [
    {
      "id": 1,
      "name": "Переехать в провинцию",
      "type": 1,
      "phase": 1,
      "conditions": [],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        },
        {
          "type": "objectsSelect",
          "name": "provinceId",
          "object": "Province",
          "filters": ["other"],
          "label": "Куда :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "provinceId",
          "operation": "set",
          "valueParameter": "provinceId"
        }
      ]
    },
    {
      "id": 2,
      "name": "Перевести деньги",
      "type": 1,
      "phase": 2,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "cash",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterIdFrom",
          "value": "Character.id"
        },
        {
          "type": "objectsSelect",
          "name": "characterIdTo",
          "object": "Character",
          "filters": ["other"],
          "label": "Кому :"
        },
        {
          "type": "exactValue",
          "name": "amount",
          "label": "Сколько :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterIdFrom",
          "property": "cash",
          "operation": "subtract",
          "valueParameter": "amount"
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterIdTo",
          "property": "cash",
          "operation": "add",
          "valueParameter": "amount"
        }
      ]
    },
    {
      "id": 3,
      "name": "Создать фракцию",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "or",
          "conditions": [
            {
              "type": "propertyValue",
              "object": "Character",
              "property": "factionId",
              "is": "empty"
            },
            {
              "type": "propertyValue",
              "object": "Character.Faction",
              "property": "leaderId",
              "is": "notIn",
              "value": "Character.id"
            }
          ]
        },
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "notIn",
          "value": [5]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "leaderId",
          "value": "Character.id"
        },
        {
          "type": "exactValue",
          "name": "name",
          "label": "Название :"
        },
        {
          "type": "colorSelect",
          "name": "color",
          "label": "Цвет :"
        },
        {
          "type": "objectsSelect",
          "name": "ambitionId",
          "object": "Config.character_ambitions",
          "filters": ["makeLeader"],
          "label": "Амбиция :"
        }
      ],
      "effects": [
        {
          "type": "createObject",
          "object": "Faction"
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "leaderId",
          "property": "ambitionId",
          "operation": "set",
          "valueParameter": "ambitionId"
        }
      ]
    },
    {
      "id": 4,
      "name": "Распустить фракцию",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character.Faction",
          "property": "leaderId",
          "is": "in",
          "value": "Character.id"
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "factionId",
          "value": "Character.factionId"
        }
      ],
      "effects": [
        {
          "type": "destroyObject",
          "object": "Faction",
          "valueParameter": "factionId"
        }
      ]
    },
    {
      "id": 5,
      "name": "Вступить во фракцию",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "or",
          "conditions": [
            {
              "type": "propertyValue",
              "object": "Character",
              "property": "factionId",
              "is": "empty"
            },
            {
              "type": "propertyValue",
              "object": "Character.Faction",
              "property": "leaderId",
              "is": "notIn",
              "value": "Character.id"
            }
          ]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        },
        {
          "type": "objectsSelect",
          "name": "factionId",
          "object": "Faction",
          "filters": ["other"],
          "label": "Фракция :"
        }
      ],
      "effects": [
        {
          "type": "factionRequest"
        }
      ]
    },
    {
      "id": 6,
      "name": "Принять во фракцию",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character.Faction",
          "property": "leaderId",
          "is": "in",
          "value": "Character.id"
        }
      ],
      "parameters": [
        {
          "type": "objectsSelect",
          "name": "characterId",
          "object": "Character",
          "filters": ["other", "otherFaction"],
          "label": "Кого :"
        }
      ],
      "effects": [
        {
          "type": "factionRequestAccept"
        }
      ]
    },
    {
      "id": 7,
      "name": "Выйти из фракции",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "factionId",
          "is": "notNull"
        },
        {
          "type": "propertyValue",
          "object": "Character.Faction",
          "property": "leaderId",
          "is": "notIn",
          "value": "Character.id"
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "factionId",
          "operation": "set",
          "valueExact": null
        }
      ]
    },
    {
      "id": 8,
      "name": "Изгнать из фракции",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character.Faction",
          "property": "leaderId",
          "is": "in",
          "value": "Character.id"
        }
      ],
      "parameters": [
        {
          "type": "objectsSelect",
          "name": "characterId",
          "object": "Character",
          "filters": ["other", "sameFaction"],
          "label": "Кого :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "factionId",
          "operation": "set",
          "valueExact": null
        }
      ]
    },
    {
      "id": 9,
      "name": "Собрать доп. подати",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "estatesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "turnModifier",
          "object": "Character",
          "objectId": "characterId",
          "property": "estatesIncome",
          "operation": "multiply",
          "valueExact": 0.5
        },
        {
          "type": "persistModifier",
          "object": "Character",
          "objectId": "characterId",
          "property": "estatesIncome",
          "operation": "multiply",
          "valueExact": -0.1
        }
      ]
    },
    {
      "id": 10,
      "name": "Пропустить сбор податей",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "estatesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "turnModifier",
          "object": "Character",
          "objectId": "characterId",
          "property": "estatesIncome",
          "operation": "multiply",
          "valueExact": -1
        },
        {
          "type": "persistModifier",
          "object": "Character",
          "objectId": "characterId",
          "property": "estatesIncome",
          "operation": "multiply",
          "valueExact": 0.05
        }
      ]
    },
    {
      "id": 11,
      "name": "Раздавать еду в городах",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "estatesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "turnModifier",
          "object": "Character",
          "objectId": "characterId",
          "property": "estatesIncome",
          "operation": "multiply",
          "valueExact": -0.5
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "add",
          "valueExact": 10
        }
      ]
    },
    {
      "id": 12,
      "name": "Призывать крестьян",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "estatesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "add",
          "valueExact": -5
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "recruits",
          "operation": "add",
          "valueCalculate": {
            "multiply": {
              "valueExact": 10,
              "valueProperty": {
                "object": "Character",
                "objectId": "characterId",
                "property": "estatesCount"
              }
            }
          }
        }
      ]
    },
    {
      "id": 13,
      "name": "Купить владение",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [1]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "estatesCount",
          "operation": "add",
          "valueExact": 1
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "cash",
          "operation": "add",
          "valueExact": -100
        }
      ]
    },
    {
      "id": 14,
      "name": "Продать владение",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "estatesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        },
        {
          "type": "exactValue",
          "name": "amount",
          "label": "Сколько :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "estatesCount",
          "operation": "subtract",
          "valueParameter": "amount"
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "cash",
          "operation": "add",
          "valueCalculate": {
            "multiply": {
              "valueExact": 50,
              "valueParameter": "count"
            }
          }
        }
      ]
    },
    {
      "id": 15,
      "name": "Вербовать горожан",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [2, 3, 4, 5]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "subtract",
          "valueExact": 5
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "cash",
          "operation": "subtract",
          "valueExact": 10
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "recruits",
          "operation": "add",
          "valueCalculate": {
            "multiply": {
              "valueExact": 1,
              "valueProperty": {
                "object": "Character",
                "objectId": "characterId",
                "property": "popularity"
              }
            }
          }
        }
      ]
    },
    {
      "id": 17,
      "name": "Развивать предприятия",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [3]
        },
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "factoriesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "turnModifier",
          "object": "Character",
          "objectId": "characterId",
          "property": "factoriesIncome",
          "operation": "multiply",
          "valueExact": -0.5
        },
        {
          "type": "persistModifier",
          "object": "Character",
          "objectId": "characterId",
          "property": "factoriesIncome",
          "operation": "multiply",
          "valueExact": 0.05
        }
      ]
    },
    {
      "id": 18,
      "name": "Открыть предприятие",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [3]
        },
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "factoriesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "factoriesCount",
          "operation": "add",
          "valueExact": 1
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "cash",
          "operation": "subtract",
          "valueExact": 50
        }
      ]
    },
    {
      "id": 19,
      "name": "Продать предприятие",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "factoriesCount",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        },
        {
          "type": "exactValue",
          "name": "amount",
          "label": "Сколько :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "factoriesCount",
          "operation": "subtract",
          "valueParameter": "amount"
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "cash",
          "operation": "add",
          "valueCalculate": {
            "multiply": {
              "valueExact": 70,
              "valueParameter": "amount"
            }
          }
        }
      ]
    },
    {
      "id": 20,
      "name": "Благотворительность",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "cash",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        },
        {
          "type": "exactValue",
          "name": "count",
          "label": "Сколько :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "cash",
          "operation": "subtract ",
          "valueParameter": "amount"
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "add",
          "valueCalculate": {
            "multiply": {
              "valueExact": 0.2,
              "valueParameter": "amount"
            }
          }
        }
      ]
    },
    {
      "id": 21,
      "name": "Агитация",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [4]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "add",
          "valueExact": 10
        },
        {
          "type": "propertyChange",
          "object": "Character.Faction.Leader",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "add",
          "valueExact": 5
        }
      ]
    },
    {
      "id": 22,
      "name": "Очернение",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [4]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterIdWho",
          "value": "Character.id"
        },
        {
          "type": "objectsSelect",
          "name": "characterIdWhom",
          "object": "Character",
          "filters": ["other", "otherFaction"],
          "label": "Кого :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterIdWho",
          "property": "popularity",
          "operation": "add",
          "valueExact": 5
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterIdWhom",
          "property": "popularity",
          "operation": "add",
          "valueExact": -10
        }
      ]
    },
    {
      "id": 23,
      "name": "Сбор пожертвований",
      "type": 3,
      "phase": 4,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [4, 5]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "cash",
          "operation": "add",
          "valueCalculate": {
            "multiply": {
              "valueExact": 0.2,
              "valueProperty": {
                "object": "Character",
                "objectId": "characterId",
                "property": "popularity"
              }
            }
          }
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "subtract",
          "valueExact": 5
        }
      ]
    },
    {
      "id": 24,
      "name": "Разжигание фанатизма",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [5]
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterId",
          "value": "Character.id"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character.Faction.Leader",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "add",
          "valueExact": 15
        }
      ]
    },
    {
      "id": 25,
      "name": "Анафема",
      "type": 3,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [5]
        }
      ],
      "parameters": [
        {
          "type": "objectsSelect",
          "name": "characterId",
          "object": "Character",
          "filters": ["other", "otherFaction"],
          "label": "На кого :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "popularity",
          "operation": "subtract",
          "valueExact": 15
        }
      ]
    },
    {
      "id": 26,
      "name": "Создать армию !!TODO!!",
      "type": 4,
      "phase": 2,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "classId",
          "is": "in",
          "value": [6]
        }
      ],
      "parameters": [
      ],
      "effects": [
      ]
    },
    {
      "id": 27,
      "name": "Передать рекрутов",
      "type": 4,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character",
          "property": "recruits",
          "is": "moreThan",
          "value": 0
        }
      ],
      "parameters": [
        {
          "type": "hiddenValue",
          "name": "characterIdFrom",
          "value": "Character.id"
        },
        {
          "type": "objectsSelect",
          "name": "characterIdTo",
          "object": "Character",
          "filters": ["other"],
          "label": "Кому :"
        },
        {
          "type": "exactValue",
          "name": "amount",
          "label": "Сколько :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterIdFrom",
          "property": "recruits",
          "operation": "subtract",
          "valueParameter": "amount"
        },
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterIdTo",
          "property": "recruits",
          "operation": "add",
          "valueParameter": "amount"
        }
      ]
    },
    {
      "id": 28,
      "name": "Назначить на должность !!TODO!!",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character.Faction",
          "property": "leaderId",
          "is": "in",
          "value": "Character.id"
        }
      ],
      "parameters": [
        {
          "type": "objectsSelect",
          "name": "characterId",
          "object": "Character",
          "filters": ["other", "sameFaction"],
          "label": "Кого :"
        },
        {
          "type": "objectsSelect",
          "name": "appointmentId",
          "object": "Appointment",
          "filters": ["free"],
          "label": "Кем :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "appointmentId",
          "operation": "parameter",
          "valueExact": "appointmentId"
        }
      ]
    },
    {
      "id": 29,
      "name": "Снять с должности !!TODO!!",
      "type": 2,
      "phase": 1,
      "conditions": [
        {
          "type": "propertyValue",
          "object": "Character.Faction",
          "property": "leaderId",
          "is": "in",
          "value": "Character.id"
        }
      ],
      "parameters": [
        {
          "type": "objectsSelect",
          "name": "characterId",
          "object": "Character",
          "filters": ["other", "sameFaction"],
          "label": "Кого :"
        }
      ],
      "effects": [
        {
          "type": "propertyChange",
          "object": "Character",
          "objectId": "characterId",
          "property": "appointmentId",
          "operation": "set",
          "valueExact": 0
        }
      ]
    }
  ]
}